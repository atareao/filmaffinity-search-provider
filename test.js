//imports.misc.extensionUtils.getCurrentExtension().imports.require;
imports.searchPath.unshift('.');
const html2json = imports.html2json.html2json;

let data = `<div class="news-summary"> <div class="news-body">  <div class="news-shakeit mnm-queued"> <div class="votes"> <a id="a-votes-3002952" href="/story/markdown-camino-hacia-productividad">32</a> meneos </div>  <div class="menealo" id="a-va-3002952">  <a href="javascript:menealo(0, 3002952)" id="a-shake-3002952">menéalo</a>  </div>  <div class="clics">  513 clics  </div> </div>     <a href="https://www.meneame.net/backend/media?type=link&amp;id=3002952&amp;version=0&amp;ts=1535557326&amp;image.jpeg" class="fancybox thumbnail-wrapper" title="miniatura"><img data-2x='s:thumb:thumb_2x:' data-src='cache/2d/d2/media_thumb-link-3002952.jpeg?1535557326' src="https://mnmstatic.net/v_144/img/g.gif" alt="Markdown o el camino hacia la productividad" class='thumbnail lazy'/></a>  <div class="center-content">  <h2> <a href="https://www.atareao.es/como/markdown-o-camino-hacia-la-productividad/" class="l:3002952"  rel="nofollow"> Markdown o el camino hacia la productividad </a>  </h2>    <div class="news-submitted">  <a href="/user/Sinfonico" class="tooltip u:403619"><img src="https://mnmstatic.net/v_144/img/g.gif" data-src="/cache/06/28/403619-1491835376-25.jpg" data-2x="s:-25.:-40." alt="Sinfonico" class="lazy"/></a>  por <a href="/user/Sinfonico/history">Sinfonico</a>  a <span class="showmytitle" title="https://www.atareao.es/como/markdown-o-camino-hacia-la-productividad/">atareao.es</span>  &nbsp;  enviado:   <span data-ts="1535538632" class="ts visible" title="enviado: ">____</span>  </div>  <div class="news-content">Si cuando has leído el título de este artículo, has pensado que no es para ti, espera, no te vayas todavía. Si sueles escribir a menudo, si tienes que hacer informes, cartas, documentos, o simplemente tienes que tomar notas, entonces este artículo es para ti. No pienses que esto del Markdown es para desarrolladores o frikis, nada mas lejos de la realidad. Insisto, si escribes, este lenguaje es para ti.</div>     </div>  <div class="news-details">  <div class="news-details-data-up"> <span class="votes-up" data-toggle="tooltip" data-placement="top" title="Votos positivos"><i class="fa fa-arrow-circle-up"></i> <span id="a-usu-3002952"><strong>18</strong></span></span> <span class="wideonly votes-anonymous" data-toggle="tooltip" data-placement="top" title="Votos anónimos"><i class="fa fa-user-secret"></i> <span id="a-ano-3002952"><strong>14</strong></span></span> <span class="votes-down" data-toggle="tooltip" data-placement="top" title="Votos negativos"><i class="fa fa-arrow-circle-down"></i> <span id="a-neg-3002952"><strong>0</strong></span></span> <span class="tool karma" data-toggle="tooltip" data-placement="top" title="Karma"> <span class="karma-letter">K</span> <span class="karma-value" id="a-karma-3002952">  50  </span> </span>  <span class="tool sub-name"> <a href="/m/linux/queue" class="subname"  style=" background-color:#000000 !important; "  >linux</a> </span>  </div>    <div class="news-details-main"> <a class="comments" href="/story/markdown-camino-hacia-productividad" title="comentarios de: «Markdown o el camino hacia la productividad»"> <i class="fa fa-comments"></i>8 comentarios </a>  <button class="social-share"><i class="fa fa-share-alt"></i>compartir</button>    <div class="wrapper-share-icons hide"> <ul class="share-icons" data-url="https://www.meneame.net/story/markdown-camino-hacia-productividad" data-title="Markdown o el camino hacia la productividad"> <li> <a class="share-facebook" href="#" onClick="share_fb(this)"><i class="fa fa-facebook-square"></i>Compartir en Facebook</a> </li> <li> <a class="share-twitter" href="#" onClick="share_tw(this)"><i class="fa fa-twitter-square"></i>Compartir en Twitter</a> </li>  <li> <a class="share-mail" href="mailto:?subject=Markdown o el camino hacia la productividad&body=https%3A%2F%2Fwww.meneame.net%2Fstory%2Fmarkdown-camino-hacia-productividad" title="Compartir por Correo"><i class="fa fa-envelope"></i>Compartir por Correo</a> </li> <li> <button class="share-link" data-clipboard-text="http://menea.me/1sd3c"><i class="fa fa-link"></i><span>Copiar enlace</span></button> </li> </ul> </div>    </div>  <div class="news-details-data-down"> <span class="votes-up" data-toggle="tooltip" data-placement="top" title="Votos positivos"><i class="fa fa-arrow-circle-up"></i> <span id="a-usu-3002952"><strong>18</strong></span></span> <span class="wideonly votes-anonymous" data-toggle="tooltip" data-placement="top" title="Votos anónimos"><i class="fa fa-user-secret"></i> <span id="a-ano-3002952"><strong>14</strong></span></span> <span class="votes-down" data-toggle="tooltip" data-placement="top" title="Votos negativos"><i class="fa fa-arrow-circle-down"></i> <span id="a-neg-3002952"><strong>0</strong></span></span> <span class="tool karma" data-toggle="tooltip" data-placement="top" title="Karma"> <span class="karma-letter">K</span> <span class="karma-value" id="a-karma-3002952">  50  </span> </span>  <span class="tool sub-name"> <a href="/m/linux/queue" class="subname"  style=" background-color:#000000 !important; "  >linux</a> </span>  </div>    </div>   </div> </div>    <div class="news-summary"> <div class="news-body">  <div class="news-shakeit mnm-queued"> <div class="votes"> <a id="a-votes-2983211" href="/story/ubuntu-make">15</a> meneos </div>  <div class="menealo" id="a-va-2983211">  <span class="closed">cerrado</span>  </div>  <div class="clics">  232 clics  </div> </div>     <a href="https://www.meneame.net/backend/media?type=link&amp;id=2983211&amp;version=0&amp;ts=1532013602&amp;image.jpeg" class="fancybox thumbnail-wrapper" title="miniatura"><img data-2x='s:thumb:thumb_2x:' data-src='cache/2d/85/media_thumb-link-2983211.jpeg?1532013602' src="https://mnmstatic.net/v_144/img/g.gif" alt="Ubuntu Make" class='thumbnail lazy'/></a>  <div class="center-content">  <h2> <a href="https://www.atareao.es/software/programacion/ubuntu-make/" class="l:2983211"  rel="nofollow"> Ubuntu Make </a>  </h2>    <div class="news-submitted">  <a href="/user/Sinfonico" class="tooltip u:403619"><img src="https://mnmstatic.net/v_144/img/g.gif" data-src="/cache/06/28/403619-1491835376-25.jpg" data-2x="s:-25.:-40." alt="Sinfonico" class="lazy"/></a>  por <a href="/user/Sinfonico/history">Sinfonico</a>  a <span class="showmytitle" title="https://www.atareao.es/software/programacion/ubuntu-make/">atareao.es</span>  &nbsp;  enviado:   <span data-ts="1531903637" class="ts visible" title="enviado: ">____</span>  </div>  <div class="news-content">Ubuntu-make es una herramienta de Ubuntu para el terminal. Esta aplicación te permite descargar e instalar las principales herramientas que se utilizan para desarrollar, así como las dependencias necesarias. Hay que resaltar, que para instalar la aplicación no es necesario tener derechos de administrador. Sin embargo, si es necesario instalar alguna dependencia, esto se tendrá que realizar como administrador.</div>     </div>  <div class="news-details">  <div class="news-details-data-up"> <span class="votes-up" data-toggle="tooltip" data-placement="top" title="Votos positivos"><i class="fa fa-arrow-circle-up"></i> <span id="a-usu-2983211"><strong>9</strong></span></span> <span class="wideonly votes-anonymous" data-toggle="tooltip" data-placement="top" title="Votos anónimos"><i class="fa fa-user-secret"></i> <span id="a-ano-2983211"><strong>6</strong></span></span> <span class="votes-down" data-toggle="tooltip" data-placement="top" title="Votos negativos"><i class="fa fa-arrow-circle-down"></i> <span id="a-neg-2983211"><strong>0</strong></span></span> <span class="tool karma" data-toggle="tooltip" data-placement="top" title="Karma"> <span class="karma-letter">K</span> <span class="karma-value" id="a-karma-2983211">  16  </span> </span>  <span class="tool sub-name"> <a href="/m/linux/queue" class="subname"  style=" background-color:#000000 !important; "  >linux</a> </span>  </div>    <div class="news-details-main"> <a class="comments" href="/story/ubuntu-make" title="comentarios de: «Ubuntu Make»"> <i class="fa fa-comments"></i>1 comentarios </a>  <button class="social-share"><i class="fa fa-share-alt"></i>compartir</button>    <div class="wrapper-share-icons hide"> <ul class="share-icons" data-url="https://www.meneame.net/story/ubuntu-make" data-title="Ubuntu Make"> <li> <a class="share-facebook" href="#" onClick="share_fb(this)"><i class="fa fa-facebook-square"></i>Compartir en Facebook</a> </li> <li> <a class="share-twitter" href="#" onClick="share_tw(this)"><i class="fa fa-twitter-square"></i>Compartir en Twitter</a> </li>  <li> <a class="share-mail" href="mailto:?subject=Ubuntu Make&body=https%3A%2F%2Fwww.meneame.net%2Fstory%2Fubuntu-make" title="Compartir por Correo"><i class="fa fa-envelope"></i>Compartir por Correo</a> </li> <li> <button class="share-link" data-clipboard-text="http://menea.me/1rxuz"><i class="fa fa-link"></i><span>Copiar enlace</span></button> </li> </ul> </div>    </div>  <div class="news-details-data-down"> <span class="votes-up" data-toggle="tooltip" data-placement="top" title="Votos positivos"><i class="fa fa-arrow-circle-up"></i> <span id="a-usu-2983211"><strong>9</strong></span></span> <span class="wideonly votes-anonymous" data-toggle="tooltip" data-placement="top" title="Votos anónimos"><i class="fa fa-user-secret"></i> <span id="a-ano-2983211"><strong>6</strong></span></span> <span class="votes-down" data-toggle="tooltip" data-placement="top" title="Votos negativos"><i class="fa fa-arrow-circle-down"></i> <span id="a-neg-2983211"><strong>0</strong></span></span> <span class="tool karma" data-toggle="tooltip" data-placement="top" title="Karma"> <span class="karma-letter">K</span> <span class="karma-value" id="a-karma-2983211">  16  </span> </span>  <span class="tool sub-name"> <a href="/m/linux/queue" class="subname"  style=" background-color:#000000 !important; "  >linux</a> </span>  </div>    </div>   </div> </div>'`;
let position = -1;
do{
    position ++;
    position = data.indexOf('<div class="news-summary">', position);

    let position_image_start = data.indexOf('data-src', position) + 10;
    let position_image_end = data.indexOf('?', position_image_start);
    let image_url = data.substring(position_image_start, position_image_end);
    let position_title_start = data.indexOf('<h2>', position) + 4;
    position_title_start = data.indexOf('>', position_title_start) + 1;
    let position_title_end = data.indexOf('</a>', position_title_start);
    let title = data.substring(position_title_start, position_title_end);
    let position_content_start = data.indexOf('<div class="news-content">') + 26;
    let position_content_end = data.indexOf('</div>', position_content_start);
    let content = data.substring(position_content_start, position_content_end);
    let position_url_start = data.indexOf('<h2>', position) + 14;
    let position_url_end = data.indexOf('class', position_url_start) - 2;
    let url = data.substring(position_url_start, position_url_end);

    let element = { 
                url: url,
                image_url: image_url,
                title: title,
                content: content
    }
    print(JSON.stringify(element));
}while(position > -1)
